import { describe, expect, it } from "bun:test";
import { autoMax } from "./auto-max";

describe("src/utils/domain/auto-max", () => {
	it.each([
		[89_000_500, 90_000_000],
		[120, 120], // 0,20,40, 60, 80, 100, 120
		[24.99, 25], // 25 0, 5, 10, 15, 20, 25
		[99.8, 100], // 0, 20, 40, 60, 80, 100
		[100.001, 110], // 100 ineligible, 110 eligible (10ths) (0,10,20,30,40,50,60,70,80,90,100,110) (12 ticks, 11 jumps);
		[49.99, 50], // 50 ineligible, 10,20,30,40,50
		[0.444445, 0.45], // 0.5 ineligible, 0.6 eligible (10ths)
		[121, 140], // 0,20,40, 60, 80, 100, 120, 140
		[121_000, 140_000], // 0, 20_000, 40_000, 60_000, 80_000, 100_000, 120_000, 140_000
		[100, 100],
		[99.13, 100],
		[5035.44, 5500], // 5035.43797916793 rounds to 5500 (0, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000, 5500)
	])("Should autoMax(%i) should return %i", (max, expected) => {
		expect(autoMax({ max, min: 0 })).toBe(expected);
	});
});
